# Hystrix

Hystrix是一个用于处理分布式系统的延迟和容错的开源库，在分布式系统里，许多依赖不可避免的会调用失败，比如超时、异常等，Hystrix能够保证在一个依赖出问题的情况下，不会导致整体服务失败，避免级联故障，以提高分布式系统的弹性。

## 服务降级 

向调用方返回一个符合预期的、可处理的备选响应（FallBack）。

服务器忙，请稍后再试，不让客户端等待并立刻返回一个友好提示。

#### 哪些情况会触发降级

- 程序运行异常

- 超时

- 服务熔断触发服务降级

- 线程池/信号量打满也会导致服务降级

#### @HystrixCommand报异常后如何处理

一旦调用服务方法失败并跑出了错误信息后，会自动调用@HystrixCommand标注好的fallbackMethod调用类中的指定方法



@EnableHystrix 和 @@EnableCircuitBreaker这两者这件有何不同？

feign ribbon Hystrix整合配置详解

https://www.cnblogs.com/crazymakercircle/p/11664812.html



触发降级的超时配置

默认为1000ms，同时配置了多个超时时间时（注解+yml），以小的为准




## 服务熔断

类比保险丝，达到最大服务访问后，直接拒绝访问，调用服务降级方法并返回友好提示

##### 熔断机制概述

熔断机制是应对雪崩效应的一种微服务链路保护机制。当扇出链路的某个微服务出错不可用或者响应时间太长时，会进行服务的降级，进而熔断该节点微服务的调用，快速返回错误的响应信息。

当检测到该节点微服务调用响应正常后，恢复调用链路。

在Spring Cloud框架里，熔断机制通过Hystrix实现。Hystrix会监控微服务间调用的状况，当失败的调用到一定阈值（缺省是5秒内20次调用失败），就会启动熔断机制。熔断机制的注解是@HystrixCommand。



## 服务限流

秒杀、高并发等操作，严禁一窝蜂的过来拥挤，大家排队，一秒钟N个，有序进行